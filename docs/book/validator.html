<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Become a Validator - The Nimbus Beacon Chain Book</title>
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="intro.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="install.html"><strong aria-hidden="true">2.</strong> Installation</a></li><li class="chapter-item expanded "><a href="validator.html" class="active"><strong aria-hidden="true">3.</strong> Become a Validator</a></li><li class="chapter-item expanded "><a href="cli.html"><strong aria-hidden="true">4.</strong> Command-line Options</a></li><li class="chapter-item expanded "><a href="api.html"><strong aria-hidden="true">5.</strong> API</a></li><li class="chapter-item expanded "><a href="advanced.html"><strong aria-hidden="true">6.</strong> Advanced Usage for Developers</a></li><li class="chapter-item expanded "><a href="faq.html"><strong aria-hidden="true">7.</strong> FAQs</a></li><li class="chapter-item expanded "><a href="contribute.html"><strong aria-hidden="true">8.</strong> Contribute</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">The Nimbus Beacon Chain Book</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#become-a-validator" id="become-a-validator">Become a Validator</a></h1>
<p>To become a validator, you need to install the beacon chain software, acquire 32 ETH, set up your validator account and register with the deposit contract on Ethereum.</p>
<p>There is currently no Eth2 mainnet - all networks are testnets.</p>
<h2><a class="header" href="#recommended-testnets" id="recommended-testnets">Recommended Testnets</a></h2>
<p>Though Nimbus can connect to any of the testnets published in the <a href="https://github.com/eth2-clients/eth2-testnets/tree/master/nimbus">eth2-clients/eth2-testnets repo</a>, below are the recommended ones:</p>
<ul>
<li>Multi-client Testnet: <a href="https://github.com/goerli/altona">altona</a> (<a href="https://altona.beaconcha.in">explorer</a>)</li>
<li>Nimbus Testnet: testnet0 (experimental, not always active)</li>
</ul>
<h2><a class="header" href="#altona" id="altona">Altona</a></h2>
<h3><a class="header" href="#initial-setup" id="initial-setup">Initial setup</a></h3>
<p>Before we start, we have to obtain 32 ETH on the Goerli testnet (later on, we'll need to send this ETH to the deposit contract in order to become a validator).</p>
<ol>
<li>Open your <a href="https://metamask.io/">MetaMask</a> wallet, switch to the <code>Goerli Test Network</code> option from the top right corner.</li>
<li>Copy your account address by clicking on one of your accounts.</li>
<li>Post your account address on a social media platform (Twitter or Facebook). Copy the url to the post.</li>
<li>Paste your post url on the <a href="https://faucet.goerli.mudit.blog/">Goerli faucet</a> and select <code>Give me Ether &gt; 37.5 Ethers</code> from the top right corner of the page.</li>
<li>Wait for a few seconds and return to your MetaMask wallet to check if you have successfully received the ETH.</li>
<li>Once the <a href="./install.html">prerequisites</a> are installed, you can connect to the altona testnet with the following commands: <br></li>
</ol>
<ul>
<li><strong><em>Remember to replace <code>make</code> with <code>mingw32-make</code> if using Windows.</em></strong></li>
</ul>
<pre><code class="language-bash">git clone https://github.com/status-im/nim-beacon-chain
cd nim-beacon-chain
git checkout devel
git pull
make update
make altona        # This will build Nimbus and all other dependencies
                   # and connect you to altona
</code></pre>
<p><em>Once Nimbus has finished building, you will be prompted to enter the private key of the account you want to deposit the 32 ETH from.</em></p>
<img src="./img/connect_testnet.PNG" alt="" style="margin: 0 40 0 40"/>
<ol start="7">
<li>Copy your private key from MetaMask (click on the three dots in the top right, followed by <strong>Account Details</strong> and <strong>Export Private Key</strong>).</li>
</ol>
<img src="./img/metamask_export_private_1.png" alt="" width="200" style="margin: 0 40 0 40"/>
<img src="./img/metamask_export_private_2.png" alt="" width="200" style="padding-left: 60px; padding-right: 60px; margin: 0 40 0 40"/>
<img src="./img/metamask_export_private_3.png" alt="" width="200" style="margin: 0 40 0 40"/>
<ol start="8">
<li>Paste your private key into the console.</li>
</ol>
<img src="./img/enter_private_key.PNG" alt="" style="margin: 0 40 0 40"/>
<ol start="9">
<li>Press enter and wait for a few seconds until you see <em>Deposit sent</em>.</li>
</ol>
<pre><code>INF 2020-07-05 12:58:25+02:00 Generating deposits ... validatorsDir=/Users/sssaintleger/nim-beacon-chain/build/data/shared_altona_0/validators ...
INF 2020-07-05 12:58:25+02:00 Sending deposits ... DepositContract=0x16e82D77882A663454Ef92806b7DeCa1D394810f ...
INF 2020-07-05 12:58:26+02:00 Deposit sent ... status=0x5455b1faf773a535668bdd4ade6b03f6cfd52f88414a5ad74bbdfdfd89f28b86

Deposit sent, wait for confirmation then press enter to continue
</code></pre>
<ol start="10">
<li>Check the status of your deposit by copying and pasting the transaction hash into <a href="https://goerli.etherscan.io/">https://goerli.etherscan.io/</a> (where the transacton hash is the text displayed after <code>status=</code> in your console). For example, in the output displayed after step 9,  we have <code>status=0x5455...</code> so the transaction hash is  <code>0x5455...</code>. If you see a green <em>Success</em> box (see the image below)  you can go ahead and press enter to continue.</li>
</ol>
<img src="./img/deposit-transaction-details.png" alt="" style="margin: 0 40 0 40"/>
<blockquote>
<p>Note: it should take approximately 8 hours for your deposit to be processed by the beacon chain. To keep track of the status of your validator you should go to <a href="https://altona.beaconcha.in/validators/eth1deposits">https://altona.beaconcha.in/validators/eth1deposits/[Validator PubKey]</a>, replacing [Validator PubKey] with your actual Validator PubKey -- you can find this in the etherscan transaction details (for example, in the image above the Validator PubKey is  <code>0x95aa...</code>).</p>
</blockquote>
<p>And voila! That's all there is to it :)</p>
<p>The beacon chain client will start syncing the network while your deposit is being processed. As soon as it has synced, and your validator has been confirmed as active, the client will start performing validation duties.</p>
<p>P.S.  at the bottom of the console, you should see something like:</p>
<pre><code>peers: 18 &gt; finalized: 710631d5:283 &gt; head: 98204d1:285:10 &gt; time: 1405:2 (44982)
ETH: 0
</code></pre>
<p>You can get a brief estimate of the time remaining until you've synced to the network by comparing <code>head</code> with <code>time</code> (<code>time</code> gives the current epoch, whereas <code>head</code> tells you how many epochs you've synced so far). From the above output, we see that the number of epochs synced so far is <code>285</code>, and the current epoch is <code>1405</code>.</p>
<h3><a class="header" href="#upgrading" id="upgrading">Upgrading</a></h3>
<p>When you restart the beacon node, the software will resume from where it left off, using your previous deposits.</p>
<pre><code>cd nim-beacon-chain
git pull
make update # Update dependencies
make altona # Restart using same keys as last run
</code></pre>
<h2><a class="header" href="#key-management" id="key-management">Key management</a></h2>
<p>Keys are stored in the <code>build/data/[testnet_name]/</code> folder, under <code>secrets</code> and <code>validators</code> - make sure you keep these folders backed up.</p>
<p>The <code>secrets</code> folder contains the common secret that gives you access to all your validator keys.</p>
<p>The <code>validators</code> folder contains your keystores. Keystores are used by validators as a method for exchanging keys. </p>
<p>For more on keys in eth2, see <a href="https://blog.ethereum.org/2020/05/21/keys/">here</a>.</p>
<h2><a class="header" href="#metrics" id="metrics">Metrics</a></h2>
<p>Metrics are not included in the binary by default - to enable them, use the following options when starting the client:</p>
<pre><code>make NIMFLAGS=&quot;-d:insecure&quot; altona
</code></pre>
<p>You can then browse the metrics by connecting to:</p>
<p>http://localhost:8008/metrics</p>
<p>Make sure this port is protected as the http server used is not considered secure and should not be used by untrusted peers.</p>
<h2><a class="header" href="#troubleshooting" id="troubleshooting">Troubleshooting</a></h2>
<ol>
<li>
<p>The directory that stores the blockchain data of the testnet is <code>build/data/shared_altona_0</code> (if you're connecting to another testnet, replace <code>altona</code> with that testnet's name). Delete this folder if you want to start over (for example, if you entered a wrong private key).</p>
</li>
<li>
<p>Currently, you have to switch to the <code>devel</code> branch in order to run the validator node successfully.</p>
</li>
<li>
<p>Everytime you want to update your node to the latest version, run <code>git pull</code>, <code>make update</code>, and then <code>make altona</code>.</p>
</li>
<li>
<p>If <code>make update</code> causes the console to hang for too long, try running <code>make update V=1</code> or <code>make update V=2</code> instead (these will print a more verbose output to the console which may make it easier to diagnose the problem).</p>
</li>
</ol>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="install.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="cli.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="install.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="cli.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        
        <!-- Livereload script (if served using the cli tool) -->
        <script type="text/javascript">
            var socket = new WebSocket("ws://localhost:3000/__livereload");
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>
        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
